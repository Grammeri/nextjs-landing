# ğŸ”— AuthForge Submodule Workflow

This document explains **how to work with the AuthForge submodule**
in the `nextjs-landing` project.

It is intended **only for project developers**
and **must not be published in the browser or marketing docs**.

---

## ğŸ§  Architecture

### ğŸ”— Repository relationship

There are two separate Git repositories:

1. **AuthForge**
   - Repository: `github.com/Grammeri/AuthForge`
   - Branch: `main`
   - This is an **independent project**
   - Its code and documentation live there

2. **Next.js Landing**
   - Repository: `github.com/Grammeri/nextjs-landing`
   - Uses AuthForge as a **git submodule**
   - The submodule lives at:
     ```
     content/authforge
     ```

### ğŸ”— What git submodule means in this project

`content/authforge` is **not a copy of files**, but a **pointer to a specific commit**
in the AuthForge repository.

ğŸ“Œ IMPORTANT:

- the landing **does not store AuthForge code**
- it stores the **commit hash** the submodule currently points to
- updating AuthForge = updating the pointer to a new commit

---

### ğŸ§© How `content/authforge` was added to the landing project

The `content/authforge` directory did **not appear automatically** and was **not generated by a build or script**.

It was added **explicitly** as a Git submodule using a Git command.

The exact command used:

```bash
git submodule add https://github.com/Grammeri/AuthForge content/authforge
```

What this command does:

creates the content/authforge directory

links it to the AuthForge repository

records the submodule configuration in:

.gitmodules

the landing repository index

After running this command:

the entire AuthForge repository tree becomes visible inside content/authforge

files are not copied, they are referenced

Git tracks only the commit hash of AuthForge, not its contents

From this moment on, the landing project treats AuthForge as an external, versioned dependency.

---

## ğŸ” Workflow (REQUIRED)

### âœ… Step 1. Work in the AuthForge repository

Go to the AuthForge repo:

```bash
cd auth-forge
```

Make changes (docs, code, anything).

Check status:

```bash
git status
```

Commit changes in AuthForge:

```bash
git add .
git commit -m "docs(authforge): update development setup"
git push
```

ğŸ‘‰ At this stage AuthForge is fully synced with GitHub.

### âœ… Step 2. Update the submodule in the landing

Go to the landing project:

```bash
cd nextjs-landing
```

Update the submodule:

```bash
git submodule update --remote content/authforge
```

Git will pull the new AuthForge commit.

ğŸ§ª Check:

```bash
git status
```

You will see:

```
modified: content/authforge (new commits)
```

ğŸ‘‰ This is normal and correct.

It means the submodule pointer now references the new AuthForge commit.

### âœ… Step 3. Commit the submodule update

```bash
git add content/authforge
git commit -m "chore(submodule): update authforge documentation"
git push
```

---

## ğŸ§  Edge cases

### ğŸ“Œ HEAD detached in the submodule

If you enter the submodule:

```bash
cd content/authforge
git status
```

You may see:

```
HEAD detached at ceb1e36
```

ğŸ“Œ This is NOT an error.

The submodule is not on a branch.
It is pinned to a specific commit.
Branches inside the submodule are not used.

ğŸ‘‰ Nothing needs to be done.

---

## âŒ Anti-patterns

- Commit AuthForge files from the landing repo
- Run `git checkout main` inside the submodule
- Edit AuthForge without switching to its repository
- Commit the landing before committing AuthForge

---

## ğŸ§ª Verification

In AuthForge:

```bash
git status
git log -1 --oneline
```

Expected:

```
On branch main
Your branch is up to date with 'origin/main'.
```

In the landing:

```bash
git status
```

Expected:

```
nothing to commit, working tree clean
```

---

## ğŸ Summary

AuthForge is a separate repository.
The landing uses a pointer to an AuthForge commit.
HEAD detached in the submodule is normal.

Always first:

commit AuthForge  
update the submodule  
commit the landing

ğŸ’¡ This approach guarantees:

no conflicts  
clean git history  
predictable CI behavior
